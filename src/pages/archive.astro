---
import BaseLayout from "../layouts/BaseLayout.astro";
import ArchivePostList from "../layouts/ArchivePostList.astro";
const allPosts = await Astro.glob("./posts/*.md");
const tags = ["网络安全", "新闻稿", "虚幻引擎", "源码研究", "CV"];
const posts = [];

tags.forEach((tag) => {
  let filteredPosts = allPosts.filter((post) => post.frontmatter.tags.includes(tag));
  posts.push(filteredPosts);
});
---



<BaseLayout primaryTitle="archive">
  <section class="archive">
    <div class="archive-tag">
      <h2 class="tag-header">Curriculum Vitae 简历</h2>
      <div class="tag-post-list">
        <ul>
          <li>
            Click <a href="https://www.terrylog.cn/posts/Curriculum%20Vitae">here</a> for my detailed CV (English).
          </li>
          <li>
            点击 <a href="https://www.terrylog.cn/posts/Curriculum%20Vitae">这里</a> 查看我的详细简历 (中文)。
          </li>
        </ul>
      </div>
    </div>

    <div class="section-content section-tag">
      {
        tags.map((tag, index) => {
          return (
            <div class="archive-tag">
              <h2 class="tag-header">{tag}</h2>
              <div class="tag-post-list">{posts[index].length !== 0 ? <ArchivePostList posts={posts[index]} /> : <div class="no-posts">暂无文章</div>}</div>
            </div>
          );
        })
      }
    </div>
  </section>
</BaseLayout>
